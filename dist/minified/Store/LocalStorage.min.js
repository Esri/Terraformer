!function(a,b){"function"==typeof define&&define.amd&&define([],b),"object"==typeof a.navigator&&("undefined"==typeof a.Terraformer&&(a.Terraformer={}),"undefined"==typeof a.Terraformer.Store&&(a.Terraformer.Store={}),a.Terraformer.Store.LocalStorage=b().LocalStorage)}(this,function(){function a(){var a=arguments[0]||{};this._key=a.key||"_terraformer"}var b,c,d={};return"object"==typeof this.navigator&&(b=this.Terraformer),"object"==typeof module&&"object"==typeof module.exports&&(b=require("terraformer")),arguments[0]&&"function"==typeof define&&define.amd&&(b=arguments[0]),a.prototype.add=function(a,b){if("FeatureCollection"===a.type)for(var c=0;c<a.features.length;c++)this.set(a.features[c]);else this.set(a);b&&b(null,a)},a.prototype.key=function(a){return this._key+"_"+a},a.prototype.remove=function(a,b){localStorage.removeItem(this.key(a)),b&&b(null,a)},a.prototype.get=function(a,b){b&&b(null,JSON.parse(localStorage.getItem(this.key(a))))},a.prototype.set=function(a){c&&localStorage.setItem(this.key(a.id),JSON.stringify(a))},a.prototype.update=function(a,b){this.set(a),b&&b(null,a)},a.prototype.toJSON=function(){var a={};for(var b in localStorage)b.match(this._key)&&(a[b]=localStorage[b]);return a},a.prototype.serialize=function(a){var b=[];for(var c in localStorage)c.match(this._key)&&b.push(localStorage.getItem(c));a&&a(null,JSON.stringify(b))},a.prototype.deserialize=function(a){for(var b=JSON.parse(a),c=b.length-1;c>=0;c--)this.set(b[c]);return this},d.LocalStorage=a,d});