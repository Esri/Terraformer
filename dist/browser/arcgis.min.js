(function(e,t){typeof module=="object"&&typeof module.exports=="object"?(Terraformer=require("terraformer"),exports=module.exports=t()):typeof define=="function"&&define.amd?define(t):(typeof e.Terraformer=="undefined"&&(e.Terraformer={}),e.Terraformer.ArcGIS=t())})(this,function(){function t(e){var t=[],n;for(var r=0;r<e.length;r++){n=e[r];if(n.length>1)for(var i=0;i<n.length;i++)t.push(n[i]);else t.push(n[0])}return t}function n(e){if(e.spatialReference){if(e.x&&e.y)return"Point";if(e.points)return"MultiPoint";if(e.paths)return e.paths.length===1?"LineString":"MultiLineString";if(e.rings)return e.rings.length===1?"Polygon":"MultiPolygon";throw"Terraformer: invalid ArcGIS input. Are you sure your data is properly formatted?"}throw"Terraformer: invalid ArcGIS input. Are you sure your data is properly formatted?"}function r(e){var t=n(e),r={type:t};e.spatialReference.wkid===102100&&(r.crs=Terraformer.MercatorCRS);switch(t){case"Point":r.coordinates=[e.x,e.y];break;case"MultiPoint":r.coordinates=e.points;break;case"LineString":r.coordinates=e.paths[0];break;case"MultiLineString":r.coordinates=e.paths;break;case"Polygon":r.coordinates=e.rings;break;case"MultiPolygon":r.coordinates=e.rings}return new Terraformer.Primitive(r)}function i(e,n){var r={spatialReference:n||{wkid:4326}};e.type==="Feature"&&(e=e.geometry);switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1];break;case"MultiPoint":r.points=e.coordinates;break;case"LineString":r.paths=[e.coordinates];break;case"MultiLineString":r.paths=e.coordinates;break;case"Polygon":r.rings=e.coordinates;break;case"MultiPolygon":r.rings=t(e.coordinates)}return r}var e={};return e.parse=r,e.convert=i,e});