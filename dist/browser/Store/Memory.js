(function(e,t){typeof module=="object"&&typeof module.exports=="object"&&(exports=module.exports=t()),typeof define=="function"&&define.amd&&define([],t),typeof e.navigator=="object"&&(typeof e.Terraformer=="undefined"&&(e.Terraformer={}),typeof e.Terraformer.Store=="undefined"&&(e.Terraformer.Store={}),e.Terraformer.Store.Memory=t().Memory)})(this,function(){function t(){this.data={}}var e={};return arguments[0]&&typeof define=="function"&&define.amd&&(this.Terraformer=arguments[0]),t.prototype.add=function(e,t){if(e.type==="FeatureCollection")for(var n=0;n<e.features.length;n++)this.data[e.features[n].id]=e.features[n];else this.data[e.id]=e;return t.resolve(e),t},t.prototype.remove=function(e,t){return delete this.data[e],t.resolve(e),t},t.prototype.get=function(e,t){return t.resolve(this.data[e]),t},t.prototype.update=function(e,t){return this.data[e.id]=e,t.resolve(),t},t.prototype.serialize=function(e){return e.resolve(JSON.stringify(this)),e},t.prototype.deserialize=function(e){return this.data=JSON.parse(e).data,dfd.resolve(this),dfd},e.Memory=t,e});